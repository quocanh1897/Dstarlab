!function(e,i){e[i]=function(i,t){this.$elem=e(i);var n=this;e.each(t,function(e,i){n[e]=i}),this.wrapCheckboxWithDivs(),this.attachEvents(),this.disableTextSelection(),this.resizeHandle&&this.optionallyResize("handle"),this.resizeContainer&&this.optionallyResize("container"),this.initialPosition()},e.extend(e[i].prototype,{wrapCheckboxWithDivs:function(){this.$elem.wrap('<div class="'+this.containerClass+'" />'),this.container=this.$elem.parent(),this.offLabel=e('<label class="'+this.labelOffClass+'"><span>'+this.uncheckedLabel+"</span></label>").appendTo(this.container),this.offSpan=this.offLabel.children("span"),this.onLabel=e('<label class="'+this.labelOnClass+'"><span>'+this.checkedLabel+"</span></label>").appendTo(this.container),this.onSpan=this.onLabel.children("span"),this.handle=e('<div class="'+this.handleClass+'"><div class="'+this.handleRightClass+'"><div class="'+this.handleCenterClass+'" /></div></div>').appendTo(this.container)},disableTextSelection:function(){e.browser.msie&&e.each([this.handle,this.offLabel,this.onLabel,this.container],function(i){e(i).attr("unselectable","on")})},optionallyResize:function(e){var i=this.onLabel.width(),t=this.offLabel.width();if("container"==e){var n=i>t?i:t;n+=this.handle.width()+15}else n=i<t?i:t;this[e].css({width:n})},attachEvents:function(){var t=this;this.container.bind("mousedown touchstart",function(n){if(n.preventDefault(),!t.$elem.is(":disabled")){var a=n.pageX||n.originalEvent.changedTouches[0].pageX;e[i].currentlyClicking=t.handle,e[i].dragStartPosition=a,e[i].handleLeftOffset=parseInt(t.handle.css("left"),10)||0}}).bind("iPhoneDrag",function(n,a){if(n.preventDefault(),!t.$elem.is(":disabled")){var s=(a+e[i].handleLeftOffset-e[i].dragStartPosition)/t.rightSide;s<0&&(s=0),s>1&&(s=1),t.handle.css({left:s*t.rightSide}),t.onLabel.css({width:s*t.rightSide+4}),t.offSpan.css({marginRight:-s*t.rightSide}),t.onSpan.css({marginLeft:-(1-s)*t.rightSide})}}).bind("iPhoneDragEnd",function(n,a){if(!t.$elem.is(":disabled")){if(e[i].dragging){var s=(a-e[i].dragStartPosition)/t.rightSide;t.$elem.attr("checked",s>=.5)}else t.$elem.attr("checked",!t.$elem.attr("checked"));e[i].currentlyClicking=null,e[i].dragging=null,t.$elem.change()}}),this.$elem.change(function(){if(t.$elem.is(":disabled"))return t.container.addClass(t.disabledClass),!1;t.container.removeClass(t.disabledClass);var e=t.$elem.attr("checked")?t.rightSide:0;t.handle.animate({left:e},t.duration),t.onLabel.animate({width:e+4},t.duration),t.offSpan.animate({marginRight:-e},t.duration),t.onSpan.animate({marginLeft:e-t.rightSide},t.duration)})},initialPosition:function(){this.offLabel.css({width:this.container.width()-5});var i=e.browser.msie&&e.browser.version<7?3:6;this.rightSide=this.container.width()-this.handle.width()-i,this.$elem.is(":checked")?(this.handle.css({left:this.rightSide}),this.onLabel.css({width:this.rightSide+4}),this.offSpan.css({marginRight:-this.rightSide})):(this.onLabel.css({width:0}),this.onSpan.css({marginLeft:-this.rightSide})),this.$elem.is(":disabled")&&this.container.addClass(this.disabledClass)}}),e.fn[i]=function(t){var n=this.filter(":checkbox");if(!n.length)return this;var a=e.extend({},e[i].defaults,t);return n.each(function(){e(this).data(i,new e[i](this,a))}),e[i].initComplete||(e(document).bind("mousemove touchmove",function(t){if(e[i].currentlyClicking){t.preventDefault();var n=t.pageX||t.originalEvent.changedTouches[0].pageX;!e[i].dragging&&Math.abs(e[i].dragStartPosition-n)>a.dragThreshold&&(e[i].dragging=!0),e(t.target).trigger("iPhoneDrag",[n])}}).bind("mouseup touchend",function(t){if(e[i].currentlyClicking){t.preventDefault();var n=t.pageX||t.originalEvent.changedTouches[0].pageX;e(e[i].currentlyClicking).trigger("iPhoneDragEnd",[n])}}),e[i].initComplete=!0),this},e[i].defaults={duration:150,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5}}(jQuery,"iphoneStyle"),jQuery(function(){jQuery(".iphonecheck").iphoneStyle({checkedLabel:"Yes",uncheckedLabel:"No"})});