!function(e,t,i){"function"==typeof e.Section&&e.control.bind("add",function(t){t.params.ubq_section&&t.params.ubq_section.section&&(t.params.original_priority=t.params.priority,t.params.original_section=t.params.section,e.section.when(t.params.ubq_section.section,function(e){e.expanded.bind(function(e){e?(t.params.ubq_section.priority&&t.priority(t.params.ubq_section.priority),t.section(t.params.ubq_section.section)):(t.priority(t.params.original_priority),t.section(t.params.original_section))})}))}),"function"==typeof e.Panel&&e.section.bind("add",function(t){t.params.ubq_panel&&t.params.ubq_panel.panel&&(t.params.original_priority=t.params.priority,t.params.original_panel=t.params.panel,e.panel.when(t.params.ubq_panel.panel,function(e){e.expanded.bind(function(e){e?(t.params.ubq_panel.priority&&t.priority(t.params.ubq_panel.priority),t.panel(t.params.ubq_panel.panel)):(t.priority(t.params.original_priority),t.panel(t.params.original_panel))})}))});var n=function(){i.has(e,"czr_ModOptVisible")&&e.czr_ModOptVisible(!1)};e.bind("ready",function(){e.czr_activeSectionId.bind(n),e.czr_activePanelId.bind(n)})}(wp.customize,jQuery,_),function(e,t,i){e.bind("ready",function(){if(themeServerControlParams.isPro&&(i.each(["tc_font_customizer_settings","header_image_sec","content_blog_sec","static_front_page","content_single_sec","tc_fpu","nav","post_lists_sec","galleries_sec","footer_customizer_sec","custom_scripts_sec","contact_info_sec"],function(t){i.delay(function(){e.section.when(t,function(e){1>=e.headContainer.length&&e.headContainer.find(".accordion-section-title").prepend('<span class="pro-title-block">Pro</span>')})},1e3)}),i.each([],function(t){e.panel.when(t,function(e){1>=e.headContainer.length&&e.headContainer.find(".accordion-section-title").prepend('<span class="pro-title-block">Pro</span>')})})),!themeServerControlParams.isPro&&i.isFunction(e.Section)){if(proSectionInstance=e.section("go_pro_sec"),!i.isObject(proSectionInstance))return;proSectionInstance.attachEvents=function(){},proSectionInstance.isContextuallyActive=function(){return this.active()},proSectionInstance._toggleActive=function(){return!0},proSectionInstance.active(!0)}})}(wp.customize,jQuery,_);var CZRMultiplePickerMths=CZRMultiplePickerMths||{};!function(e,t,i){t.extend(CZRMultiplePickerMths,{ready:function(){var e=this,i=this.container.find("select");i.select2({closeOnSelect:!1,templateSelection:function(e){return e.text.replace(/\u2013|\u2014/g,"")}}),i.on("change",function(i){0===t(this).find("option:selected").length&&e.setting.set([])})}})}(wp.customize,jQuery,_);var CZRCroppedImageMths=CZRCroppedImageMths||{};!function(e,t,i){"function"==typeof wp.media.controller.Cropper&&"function"==typeof e.CroppedImageControl&&(wp.media.controller.CZRCustomizeImageCropper=wp.media.controller.Cropper.extend({doCrop:function(e){var t=e.get("cropDetails"),i=this.get("control");return t.dst_width=i.params.dst_width,t.dst_height=i.params.dst_height,wp.ajax.post("crop-image",{wp_customize:"on",nonce:e.get("nonces").edit,id:e.get("id"),context:i.id,cropDetails:t})}}),t.extend(CZRCroppedImageMths,{initFrame:function(){var e=_wpMediaViewsL10n;this.frame=wp.media({button:{text:e.select,close:!1},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CZRCustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var e=this.frame.state().get("selection").first().toJSON();e.mime&&e.mime.indexOf("image")>-1?i.contains(["image/svg+xml","image/gif"],e.mime)||this.params.width===e.width&&this.params.height===e.height&&!this.params.flex_width&&!this.params.flex_height?(this.setImageFromAttachment(e),this.frame.close()):this.frame.setState("cropper"):this.frame.trigger("content:error")}}))}(wp.customize,jQuery,_);var CZRUploadMths=CZRUploadMths||{};!function(e,t,i){t.extend(CZRUploadMths,{ready:function(){var i=this;this.params.removed=this.params.removed||"",this.success=t.proxy(this.success,this),this.uploader=t.extend({container:this.container,browser:this.container.find(".czr-upload"),success:this.success,plupload:{},params:{}},this.uploader||{}),i.params.extensions&&(i.uploader.plupload.filters=[{title:e.l10n.allowedFiles,extensions:i.params.extensions}]),i.params.context&&(i.uploader.params["post_data[context]"]=this.params.context),e.settings.theme.stylesheet&&(i.uploader.params["post_data[theme]"]=e.settings.theme.stylesheet),this.uploader=new wp.Uploader(this.uploader),this.remover=this.container.find(".remove"),this.remover.on("click keydown",function(e){"keydown"===e.type&&13!==e.which||(i.setting.set(i.params.removed),e.preventDefault())}),this.removerVisibility=t.proxy(this.removerVisibility,this),this.setting.bind(this.removerVisibility),this.removerVisibility(this.setting())},success:function(e){this.setting.set(e.get("id"))},removerVisibility:function(e){this.remover.toggle(e!=this.params.removed)}})}(wp.customize,jQuery,_);var CZRLayoutSelectMths=CZRLayoutSelectMths||{};!function(e,t,i){t.extend(CZRLayoutSelectMths,{ready:function(){this.setupSelect()},setupSelect:function(e){var n=this;function o(e){if(!e.id)return e.text;if(i.has(n.params.layouts,e.element.value)){var o=n.params.layouts[e.element.value],s=o.src,r=o.label;return t('<img src="'+s+'" class="czr-layout-img" title="'+r+'" /><span class="czr-layout-title">'+r+"</span>")}}$_select=this.container.find("select"),$_select.select2({templateResult:o,templateSelection:o,minimumResultsForSearch:1/0})}})}(wp.customize,jQuery,_),function(e,t,i){e.CZRUploadControl=e.Control.extend(CZRUploadMths),e.CZRLayoutControl=e.Control.extend(CZRLayoutSelectMths),e.CZRMultiplePickerControl=e.Control.extend(CZRMultiplePickerMths),t.extend(e.controlConstructor,{czr_upload:e.CZRUploadControl,czr_multiple_picker:e.CZRMultiplePickerControl,czr_layouts:e.CZRLayoutControl}),"function"==typeof e.CroppedImageControl&&(e.CZRCroppedImageControl=e.CroppedImageControl.extend(CZRCroppedImageMths),t.extend(e.controlConstructor,{czr_cropped_image:e.CZRCroppedImageControl})),"function"==typeof e.CodeEditorControl&&t.extend(e.controlConstructor,{czr_code_editor:e.CodeEditorControl})}(wp.customize,jQuery,_),function(e,t,i){var n=serverControlParams.i18n||{};e.czr_CrtlDependenciesReady=t.Deferred(),e.bind("ready",function(){i.has(e,"czr_ctrlDependencies")||(serverControlParams.isSkopOn?"resolved"!=e.czr_skopeReady.state()&&e.czr_skopeReady.done(function(){e.czr_ctrlDependencies=new e.CZR_ctrlDependencies,e.czr_CrtlDependenciesReady.resolve()}):(e.czr_ctrlDependencies=new e.CZR_ctrlDependencies,e.czr_CrtlDependenciesReady.resolve()))}),e.CZR_ctrlDependencies=e.Class.extend({dominiDeps:[],initialize:function(){var t=this;if(this.defaultDominusParams={dominus:"",servi:[],visibility:null,actions:null,onSectionExpand:!0},this.dominiDeps=i.extend(this.dominiDeps,this._getControlDeps()),!i.isArray(t.dominiDeps))throw new Error("Visibilities : the dominos dependency array is not an array.");e.czr_activeSectionId.bind(function(n){if(!i.isEmpty(n)&&e.section.has(n))try{t.setServiDependencies(n)}catch(t){e.errorLog("In api.CZR_ctrlDependencies : "+t)}}),e.bind("awaken-section",function(n){if(serverControlParams.isSkopOn&&i.has(e,"czr_skopeBase"))e.czr_skopeBase.processSilentUpdates({candidates:{},section_id:n.target,refresh:!1}).then(function(){try{t.setServiDependencies(n.target,n.source)}catch(t){e.errorLog("On awaken-section, ctrl deps : "+t)}});else try{t.setServiDependencies(n.target,n.source)}catch(t){e.errorLog("On awaken-section, ctrl deps : "+t)}}),this._handleFaviconNote()},setServiDependencies:function(n,o,s){var r=this,a=t.Deferred();if(s=s||!1,i.isUndefined(n)||!e.section.has(n))throw new Error("Control Dependencies : the targetSectionId is missing or not registered : "+n);if(e.section(n).czr_ctrlDependenciesReady=e.section(n).czr_ctrlDependenciesReady||t.Deferred(),!s&&"resolved"==e.section(n).czr_ctrlDependenciesReady.state())return a.resolve().promise();i.each(r.dominiDeps,function(t){if(!i.has(t,"dominus")||!i.isString(t.dominus)||i.isEmpty(t.dominus))throw new Error("Control Dependencies : a dominus control id must be a not empty string.");var o=e.CZR_Helpers.build_setId(t.dominus);e.control.has(o)&&e.control(o).section()==n&&(t=r._prepareDominusParams(t),i.isEmpty(t)||r._processDominusCallbacks(t.dominus,t,s).fail(function(){e.consoleLog("self._processDominusCallbacks fail for section "+n),a.reject()}).done(function(){a.resolve()}))});var c=e.CZR_Helpers.getSectionControlIds(n),l=function(t){var n=[];return i.each(r.dominiDeps,function(o){if(i.has(o,"servi")&&i.isArray(o.servi)&&i.has(o,"dominus")&&!i.isEmpty(o.dominus)){if(i.contains(o.servi,t)&&!i.contains(n,o.dominus)){if(o=r._prepareDominusParams(o),i.isEmpty(o))return;n.push(o.dominus)}}else e.errorLog("Control Dependencies : wrong params in _getServusDomini.")}),i.isArray(n)?n:[]},p=[];return i.each(c,function(e){i.isEmpty(l(e))||(p=i.union(p,l(e)))}),i.each(p,function(t){var i=e.CZR_Helpers.build_setId(t);e.control(i).section()!=n&&o!=e.control(i).section()&&e.trigger("awaken-section",{target:e.control(i).section(),source:n})}),a.always(function(){e.section(n).czr_ctrlDependenciesReady.resolve()}),a.promise()},_deferCallbackForControl:function(n,o,s){var r=t.Deferred();if(i.isEmpty(n)||!i.isString(n))throw new Error("_deferCallbackForControl : the control id is missing.");if(!i.isFunction(o))throw new Error("_deferCallbackForControl : callback must be a funtion.");return s=i.isUndefined(s)||!i.isArray(s)?[]:s,e.control.has(n)?"resolved"==e.control(n).deferred.embedded.state()?t.when(o.apply(null,s)).fail(function(){r.reject()}).done(function(){r.resolve()}):e.control(n).deferred.embedded.then(function(){t.when(o.apply(null,s)).fail(function(){r.reject()}).done(function(){r.resolve()})}):e.control.when(n,function(){e.control(n).deferred.embedded.then(function(){t.when(o.apply(null,s)).fail(function(){r.reject()}).done(function(){r.resolve()})})}),r.promise()},_processDominusCallbacks:function(n,o,s){var r=this,a=e.CZR_Helpers.build_setId(n),c=e(a),l=t.Deferred(),p=!1;return i.each(o.servi,function(t){if(e.control.has(e.CZR_Helpers.build_setId(t))){var n=function(e,t,n,o){var s=arguments;i.each(n,function(e,t){switch(t){case"visibility":r._setVisibility.apply(null,s);break;case"actions":i.isFunction(e)&&e.apply(null,s)}})},s=function(i){i=i||c();var s=e.CZR_Helpers.build_setId(t);r._deferCallbackForControl(s,n,[i,t,o]).always(function(){p=!0}).fail(function(){l.reject()}).done(function(){l.resolve()})};s(),i.has(c,"czr_visibilityServi")||(c.czr_visibilityServi=new e.Value([]));var a=c.czr_visibilityServi();i.contains(a,t)||(c.bind(function(e){s(e)}),c.czr_visibilityServi(i.union(a,[t])))}}),p?l.promise():l.resolve().promise()},_setVisibility:function(t,n,o,s){var r=e.CZR_Helpers.build_setId(n),a=o.visibility(t,n,o.dominus);if(s=s||!1,i.isBoolean(a)&&("unchanged"!=a||s)){var c=function(){e.state.has("silent-update-processing")&&e.state("silent-update-processing")()||(e.control(r,function(e){i.has(e,"active")&&(a=a&&e.active()),i.has(e,"defaultActiveArguments")&&control.defaultActiveArguments,e.onChangeActive(a,e.defaultActiveArguments)}),e.state.has("silent-update-processing")&&e.state("silent-update-processing").unbind(c))};e.state.has("silent-update-processing")&&e.state("silent-update-processing")()?e.state("silent-update-processing").bind(c):c()}},_getControlDeps:function(){return{}},_prepareDominusParams:function(t){var n={};if(!i.isObject(t))return e.errorLog("Visibilities : a dominus param definition must be an object."),n;if(!i.has(t,"visibility")&&!i.has(t,"actions"))return e.errorLog("Visibilities : a dominus definition must include a visibility or an actions callback."),n;if(!i.has(t,"dominus")||!i.isString(t.dominus)||i.isEmpty(t.dominus))return e.errorLog("Visibilities : a dominus control id must be a not empty string."),n;var o=e.CZR_Helpers.build_setId(t.dominus);return e.control.has(o)?!i.has(t,"servi")||i.isUndefined(t.servi)||!i.isArray(t.servi)||i.isEmpty(t.servi)?(e.errorLog("Visibilities : servi must be set as an array not empty."),n):(i.each(this.defaultDominusParams,function(e,o){var s=t[o];switch(o){case"visibility":if(!i.isUndefined(s)&&!i.isEmpty(s)&&!i.isFunction(s))throw new Error("Visibilities : a dominus visibility callback must be a function : "+t.dominus);break;case"actions":if(!i.isUndefined(s)&&!i.isEmpty(s)&&!i.isFunction(s))throw new Error("Visibilities : a dominus actions callback must be a function : "+t.dominus);break;case"onSectionExpand":if(!i.isUndefined(s)&&!i.isEmpty(s)&&!i.isBoolean(s))throw new Error("Visibilities : a dominus onSectionExpand param must be a boolean : "+t.dominus)}n[o]=s}),n):(e.errorLog("Visibilities : a dominus control id is not registered : "+o),n)},_handleFaviconNote:function(){var t=this,i=e.CZR_Helpers.build_setId(serverControlParams.faviconOptionName);if(!(!e.has("site_icon")||!e.control("site_icon")||e.has(i)&&0==+e(i)()||+e("site_icon")()>0)){var o=e.control("site_icon").params.description;_newDes=["<strong>",n.faviconNote||"","</strong><br/><br/>"].join("")+o,t._printFaviconNote(_newDes),e("site_icon").callbacks.add(function(n){+n>0?(e.control("site_icon").container.find(".description").text(o),e.has(i)&&e(i).set("")):t._printFaviconNote(_newDes)})}},_printFaviconNote:function(t){e.control("site_icon").container.find(".description").html(t)}})}(wp.customize,jQuery,_),function(e,t){jQuery(function(t){var i=e.customize||i;t(".accordion-section").not(".control-panel").click(function(){var e,i;e=t(this),0!==(i=e.siblings(".open")).length&&i.offset().top<0&&t(".wp-full-overlay-sidebar-content").animate({scrollTop:-t("#customize-theme-controls").offset().top-i.height()+e.offset().top+t(".wp-full-overlay-sidebar-content").offset().top},700)}),i.czrSetupCheckbox=function(e,n){var o=i.control(e);t("input[type=checkbox]",o.container).each(function(){"tc_font_customizer_settings"!=o.params.section&&(0===t(this).val()||"0"==t(this).val()||"off"==t(this).val()||_.isEmpty(t(this).val())?t(this).prop("checked",!1):t(this).prop("checked",!0),0===t(this).closest('div[class^="icheckbox"]').length&&t(this).iCheck({checkboxClass:"icheckbox_flat-grey",radioClass:"iradio_flat-grey"}).on("ifChanged",function(e){t(this).val(!1===t(this).is(":checked")?0:1),t(e.currentTarget).trigger("change")}))})},i.czrSetupSelect=function(e,n){t("select[data-customize-setting-link]",i.control(e).container).not(".no-selecter-js").each(function(){t(this).selecter({})})},i.czrSetupStepper=function(e,n){var o=i.control(e);t('input[type="number"]',o.container).each(function(){t(this).stepper()})},i.control.each(function(e){if(_.has(e,"id")){"widget_"!=e.id.substring(0,"widget_".length)&&"nav_menu"!=e.id.substring(0,"nav_menu".length)&&i.czrSetupCheckbox(e.id),"nav_menu_locations"!=e.id.substring(0,"nav_menu_locations".length)&&i.czrSetupSelect(e.id);0<e.container.find('input[type="number"]').length&&e.params&&e.params.section&&!_.contains(["publish_settings","tc_font_customizer_settings"],e.params.section)&&i.czrSetupStepper(e.id)}})})}(wp);